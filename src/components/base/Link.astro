---
import { UI } from '~/config'
import type { HTMLAttributes } from 'astro/types'

interface Props extends HTMLAttributes<'a'> {
  href: string
  title?: string
  external?: boolean
  rel?: string
  children: HTMLElement | HTMLElement[] | string
}

const {
  href,
  title,
  external = false,
  rel,
  class: className,
  ...rest
} = Astro.props

const { externalLink } = UI

const openInNewTab = external && externalLink.newTab
const targetAttr = openInNewTab ? '_blank' : undefined
const relAttr =
  rel || openInNewTab
    ? `${openInNewTab ? 'noopener noreferrer' : ''} ${rel ? rel : ''}`.trim()
    : undefined
const ariaLabel = title ? title : openInNewTab ? 'Open in new tab' : undefined
---

<a
  class={className}
  {href}
  {title}
  aria-label={ariaLabel}
  target={targetAttr}
  rel={relAttr}
  {...rest}
>
  <slot /></a
>

<style>
  a {
    opacity: 0.6;
    cursor: pointer;
    text-decoration: none;
  }

  a:hover {
    opacity: 1;
    text-decoration-color: inherit;
  }
</style>
